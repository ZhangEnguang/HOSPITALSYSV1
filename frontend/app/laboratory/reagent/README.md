# 试剂管理智能排序功能

## 概述

试剂管理模块实现了基于实验室安全管理最佳实践的智能排序系统，帮助实验室管理人员优先关注需要重点管理的试剂。

## 智能排序规则

智能排序采用5层综合排序逻辑，按优先级从高到低排列：

### 1. 安全等级优先级 🚨
- **高危险品** (最高优先级)：易燃易爆、有毒有害、强腐蚀性试剂
- **中等危险品** (中等优先级)：一般化学试剂
- **低危险品** (最低优先级)：相对安全的试剂

### 2. 有效期状态 ⏰
- **已过期试剂** (最高优先级)：需要立即处置
- **即将过期试剂** (30天内)：需要优先使用
- **正常有效期试剂** (按剩余天数排序)

### 3. 库存状态 📦
- **缺货试剂** (0库存)：需要紧急采购
- **低库存试剂** (≤20%)：需要及时补充
- **正常库存试剂** (>20%)：按库存比例排序

### 4. 使用频率 📊
- **高频使用试剂** (使用频率高)：常用试剂优先显示
- **低频使用试剂** (使用频率低)：不常用试剂

### 5. 名称字母顺序 🔤
- 最后按试剂名称的字母顺序排列，确保排序结果的一致性

## 其他排序选项

除了智能排序外，系统还提供以下单一维度排序：

- **安全等级排序**：按危险等级排序
- **有效期排序**：按过期时间排序
- **库存状态排序**：按库存充足程度排序
- **使用频率排序**：按使用频次排序
- **名称排序**：按字母顺序排序
- **购置日期排序**：按采购时间排序

## 使用场景

### 日常管理
- 使用**智能排序**进行日常巡检，优先关注高危险、即将过期、库存不足的试剂

### 安全检查
- 使用**安全等级排序**重点检查高危险品的存储和使用情况

### 库存盘点
- 使用**库存状态排序**快速识别需要补充的试剂

### 过期管理
- 使用**有效期排序**制定试剂使用计划，避免浪费

## 技术实现

智能排序算法实现了多层级比较逻辑：

```typescript
// 智能排序核心逻辑
if (field === "smart") {
  // 1. 安全等级优先级
  const dangerPriority = { "高": 1, "中": 2, "低": 3 }
  
  // 2. 有效期状态
  const daysToExpiry = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24))
  
  // 3. 库存状态
  const stockRatio = currentAmount / initialAmount
  
  // 4. 使用频率
  const usageFrequency = item.usageFrequency
  
  // 5. 名称字母顺序
  return a.name.localeCompare(b.name)
}
```

## 调试功能

当选择智能排序时，系统会在浏览器控制台输出前10个试剂的排序详情，包括：
- 试剂名称
- 安全等级
- 剩余有效期天数
- 库存百分比
- 使用频率
- 当前状态

打开浏览器开发者工具的控制台即可查看详细的排序结果。 