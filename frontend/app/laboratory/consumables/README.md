# 耗材管理智能排序功能

## 功能概述

耗材管理模块实现了智能排序功能，通过多层次综合排序算法，帮助实验室管理人员更高效地管理耗材库存，优先处理紧急需求。

## 智能排序算法

### 排序层次（按优先级）

1. **库存状态优先级** - 紧急需求优先
   - 缺货（优先级1）：无库存，需要紧急采购
   - 库存不足（优先级2）：库存不足，需要及时补充
   - 充足（优先级3）：库存充足，正常状态
   - 已过期（优先级4）：已过期，需要处理

2. **使用频率** - 常用耗材优先
   - 高频使用的耗材排在前面
   - 确保常用耗材优先得到关注

3. **有效期状态** - 即将过期优先使用
   - 已过期：需要立即处理
   - 30天内过期：优先使用，避免浪费
   - 正常有效期：按剩余天数排序

4. **成本价值** - 高价值耗材优先关注
   - 总价值高的耗材优先显示
   - 帮助管理高价值库存

5. **名称排序** - 最终一致性保证
   - 按字母顺序排序
   - 确保相同条件下的一致性

## 排序选项

### 智能排序
- **🧪 智能排序 (推荐)**：综合多因素的智能排序
- **库存状态 (紧急优先)**：按库存紧急程度排序
- **使用频率 (常用优先)**：按使用频率排序
- **有效期 (即将过期优先)**：按有效期紧急程度排序
- **成本价值 (高价值优先)**：按总价值排序
- **耗材类别 (分组排序)**：按类别分组排序

### 传统排序
- 名称排序（A-Z / Z-A）
- 有效期排序（最早/最晚优先）
- 库存数量排序（从少到多/从多到少）
- 单价排序（从低到高/从高到低）

## 使用场景

### 1. 日常库存管理
- 快速识别需要补充的耗材
- 优先处理紧急缺货情况
- 关注高频使用耗材的库存状态

### 2. 采购计划制定
- 按紧急程度安排采购顺序
- 考虑使用频率制定采购量
- 关注高价值耗材的库存情况

### 3. 有效期管理
- 优先使用即将过期的耗材
- 及时处理已过期的耗材
- 减少因过期造成的浪费

### 4. 成本控制
- 重点关注高价值耗材
- 优化库存结构
- 降低库存成本

## 技术实现

### 数据结构
```typescript
interface ConsumableItem {
  id: string
  name: string
  status: "充足" | "库存不足" | "缺货" | "已过期"
  currentStock: number
  maxStock: number
  minStock: number
  expiryDate: string
  usageFrequency: number  // 使用频率 (0-100)
  totalValue: number      // 总价值
  category: string        // 耗材类别
  // ... 其他字段
}
```

### 排序算法
```typescript
// 智能排序核心逻辑
const smartSort = (a: ConsumableItem, b: ConsumableItem) => {
  // 1. 库存状态优先级
  const stockPriority = { "缺货": 1, "库存不足": 2, "充足": 3, "已过期": 4 }
  
  // 2. 使用频率排序
  // 3. 有效期状态排序
  // 4. 成本价值排序
  // 5. 名称排序
}
```

## 调试功能

系统提供控制台调试输出，显示前10个耗材的排序详情：
- 库存状态和库存比例
- 有效期剩余天数
- 使用频率
- 成本价值
- 耗材类别

## 最佳实践

1. **默认使用智能排序**：系统默认启用智能排序，适合大多数使用场景
2. **定期检查缺货耗材**：关注排序靠前的缺货和库存不足耗材
3. **优先使用即将过期耗材**：注意有效期警告，及时使用即将过期的耗材
4. **关注高价值耗材**：定期检查高价值耗材的库存状态
5. **结合筛选功能**：配合快速筛选和高级筛选功能，提高管理效率

## 更新日志

- **v1.0.0**：实现基础智能排序功能
- 支持5层综合排序算法
- 添加11种排序选项
- 提供调试输出功能
- 完善文档说明 