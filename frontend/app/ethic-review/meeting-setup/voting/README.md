# 会议投票功能说明

## 功能概述

会议投票功能是为伦理审查会议设计的投票表决系统，支持对会议审查项目进行投票，包括实名/匿名投票、投票进度跟踪、结果统计等功能。

## 核心功能

### 1. 投票管理
- **开始投票**：会议主持人可以启动投票流程
- **暂停投票**：在投票过程中可以暂停投票
- **恢复投票**：恢复已暂停的投票
- **结束投票**：结束投票并生成最终结果

### 2. 投票设置
- **投票类型**：支持实名投票和匿名投票
- **投票修改**：可设置是否允许修改投票
- **实时结果**：可设置是否实时显示投票结果
- **全员投票**：可设置是否要求全员参与投票

### 3. 投票选项
- **同意**：表示同意项目通过
- **不同意**：表示不同意项目通过
- **需要修改**：表示项目需要修改后重新审查

### 4. 投票进度跟踪
- **项目级进度**：显示每个项目的投票进度
- **会议级进度**：显示整个会议的投票进度
- **参与者状态**：显示每个参与者的投票状态

### 5. 结果统计
- **投票统计**：统计同意、不同意、需修改的票数
- **通过率计算**：计算项目通过率
- **最终结果**：基于投票结果确定最终审查结果

## 页面结构

### 1. 投票管理页面 (`/voting/[id]`)
- 投票概览统计
- 项目投票列表
- 投票设置面板
- 参会人员状态

### 2. 项目投票页面 (`/voting/[id]/project/[projectId]`)
- 项目详细信息
- 投票界面
- 投票历史记录
- 投票统计

### 3. 投票结果页面 (`/voting/[id]/results`)
- 会议信息
- 总体统计
- 项目详细结果
- 投票趋势分析

## 数据结构

### 投票项目 (VotingProject)
```typescript
interface VotingProject {
  id: string
  title: string
  acceptanceNumber: string
  projectLeader: string
  department: string
  votingStatus: VotingStatus
  votes: VoteStats
  voterDetails: VoteDetail[]
  finalResult?: "通过" | "不通过" | "需修改"
}
```

### 投票统计 (VoteStats)
```typescript
interface VoteStats {
  agree: number
  disagree: number
  modify: number
  total: number
}
```

### 投票详情 (VoteDetail)
```typescript
interface VoteDetail {
  voterId: string
  voterName: string
  vote: VoteOption
  timestamp: string
  comment?: string
}
```

## 投票流程

### 1. 准备阶段
1. 会议创建完成
2. 参会人员确认
3. 审查项目准备就绪

### 2. 投票阶段
1. 主持人启动投票
2. 参会人员进行投票
3. 实时跟踪投票进度
4. 可暂停/恢复投票

### 3. 结果阶段
1. 主持人结束投票
2. 生成投票结果
3. 查看统计分析
4. 导出投票报告

## 权限控制

### 投票权限
- 只有会议参与者可以投票
- 每个项目每人只能投票一次
- 可设置是否允许修改投票

### 管理权限
- 会议主持人可以管理投票流程
- 可以查看实时投票进度
- 可以导出投票结果

## 投票规则

### 通过条件
- 同意票数 > 50% 且 同意票数 > 不同意票数
- 具体通过条件可根据委员会规则调整

### 修改条件
- 需修改票数最多，或同意票数不足50%

### 不通过条件
- 不同意票数 > 同意票数

## 技术实现

### 前端技术
- **React 18** + **TypeScript**
- **Next.js 14** (App Router)
- **Tailwind CSS** + **shadcn/ui**
- **Zustand** (状态管理)

### 数据管理
- 类型安全的TypeScript接口
- 工具函数封装常用逻辑
- 模块化的组件设计

### 响应式设计
- 支持桌面端和移动端
- 自适应布局
- 优化的用户体验

## 使用说明

### 启动投票
1. 进入会议管理页面
2. 点击"开始投票"按钮
3. 配置投票设置
4. 启动投票流程

### 参与投票
1. 进入投票页面
2. 查看项目信息
3. 选择投票选项
4. 添加评论（可选）
5. 提交投票

### 查看结果
1. 投票结束后
2. 点击"查看结果"
3. 查看详细统计
4. 导出投票报告

## 扩展功能

### 未来可扩展功能
- 投票提醒通知
- 投票历史记录
- 批量投票操作
- 投票权重设置
- 多轮投票支持
- 投票模板管理

### 集成功能
- 与会议系统集成
- 与通知系统集成
- 与报告系统集成
- 与权限系统集成

## 注意事项

1. **数据安全**：投票数据需要安全存储和传输
2. **权限验证**：严格验证投票权限
3. **结果公正**：确保投票结果的公正性和透明度
4. **用户体验**：提供直观友好的操作界面
5. **性能优化**：大量数据时的性能优化

## 维护说明

### 定期维护
- 清理过期投票数据
- 优化数据库查询
- 更新投票规则配置

### 监控指标
- 投票参与率
- 系统响应时间
- 错误率统计
- 用户满意度

---

此投票功能为会议管理系统的重要组成部分，提供了完整的投票流程管理和结果分析功能，支持灵活的配置和扩展。 